<app-navbar></app-navbar>

<div *ngIf="!isQoranRoute && !isSurahRoute && !isSunaRoute && !isHadithRoute && !isNamesRoute && !isAzkasRoute" 
     class="min-h-screen flex flex-col items-center justify-start 
            bg-gradient-to-b from-green-100 via-white to-green-50
            dark:from-gray-800 dark:via-gray-900 dark:to-gray-800
            px-4 sm:px-6 lg:px-12 py-8 text-center transition-colors duration-300">

  <!-- Loading state -->
  <div *ngIf="loading" class="flex flex-col items-center justify-center mt-10">
    <div class="w-12 h-12 border-4 border-green-600 border-t-transparent rounded-full animate-spin
                dark:border-green-400 dark:border-t-transparent"></div>
    <p class="mt-4 text-gray-600 dark:text-gray-300 text-lg font-medium">جاري تحميل البيانات...</p>
  </div>

  <!-- Ayah -->
  <h1 *ngIf="!loading" class="text-2xl sm:text-3xl lg:text-4xl font-bold text-green-800 dark:text-green-400 mb-6 leading-relaxed">
     إِنَّ الصَّلَاةَ كَانَتْ عَلَى الْمُؤْمِنِينَ كِتَابًا مَّوْقُوتًا 
  </h1>

  <!-- Date Hijri -->
  <h2 *ngIf="!loading" class="text-base sm:text-lg lg:text-xl text-gray-700 dark:text-gray-300">
    {{ prayerTimes.date.hijri.weekday.ar }} 
    {{ prayerTimes.date.hijri.day }} 
    {{ prayerTimes.date.hijri.month.ar }} 
    {{ prayerTimes.date.hijri.year }}
  </h2>

  <!-- Loading -->
  <p *ngIf="!loading && !prayerTimes" class="text-gray-500 dark:text-gray-400 italic mb-4">
    Détection de votre localisation...
  </p>

  <!-- Next prayer -->
  <h3 class="text-xl font-semibold text-green-700 dark:text-green-400 mt-4">
    {{ nextPrayer?.name==="Fajr" ? "الفجر":nextPrayer?.name==="Sunrise"?"الشروق":nextPrayer?.name==="Dhuhr"?"الظهر":nextPrayer?.name==="Asr"?"العصر":nextPrayer?.name==="Maghrib"?"المغرب":nextPrayer?.name==="Isha"?"العشاء":"" }}
  </h3>
  <h3 *ngIf="countdown" class="text-2xl sm:text-3xl font-mono text-gray-800 dark:text-gray-200 mt-3 tracking-wide">
    {{ countdown }}
  </h3>
  <h3 *ngIf="!countdown && adhanMessage" class="text-xl sm:text-2xl text-red-600 dark:text-red-400 font-bold mt-3 animate-pulse">
    {{ adhanMessage }}
  </h3>

  <!-- Stop button -->
  <button 
    *ngIf="adhanMessage" 
    (click)="stopAlAdhan()" 
    class="mt-5 px-8 py-3 bg-red-600 dark:bg-red-500 text-white rounded-full 
           shadow-lg hover:bg-red-700 dark:hover:bg-red-600 hover:shadow-xl 
           transition-all duration-300 ease-in-out">
    إيقاف
  </button>

  <!-- City / Country -->
  <h2 *ngIf="city" class="mt-8 flex items-center justify-center gap-2 text-gray-700 dark:text-gray-300 text-lg sm:text-xl font-medium">
    <i class="fas fa-map-marker-alt text-green-600 dark:text-green-400 text-xl"></i> 
    {{ city }} , {{ country }}
  </h2>

  <!-- Prayer times list -->
  <div *ngIf="prayerTimes" class="mt-10 w-full max-w-6xl">
    <ul class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-6 sm:gap-8">
      <li class="p-2"><app-pray-cart prayName="Fajr" prayNameAr="الفجر" [prayTime]="prayerTimes.timings.Fajr"></app-pray-cart></li>
      <li class="p-2"><app-pray-cart prayName="Sunrise" prayNameAr="الشروق" [prayTime]="prayerTimes.timings.Sunrise"></app-pray-cart></li>
      <li class="p-2"><app-pray-cart prayName="Dhuhr" prayNameAr="الظهر" [prayTime]="prayerTimes.timings.Dhuhr"></app-pray-cart></li>
      <li class="p-2"><app-pray-cart prayName="Asr" prayNameAr="العصر" [prayTime]="prayerTimes.timings.Asr"></app-pray-cart></li>
      <li class="p-2"><app-pray-cart prayName="Maghrib" prayNameAr="المغرب" [prayTime]="prayerTimes.timings.Maghrib"></app-pray-cart></li>
      <li class="p-2"><app-pray-cart prayName="Isha" prayNameAr="العشاء" [prayTime]="prayerTimes.timings.Isha"></app-pray-cart></li>
    </ul>
  </div>

</div>


<!-- Audio -->
<audio #audioPlayer src="a1.mp3"></audio>

<!-- Router outlet -->
<router-outlet></router-outlet>
